<!-- Cloudflare Web Analytics -->
<script defer src="https://static.cloudflareinsights.com/beacon.min.js"
  data-cf-beacon='{"token":"28a5f7c0617a4f8aab97e95c1ea3e1b7"}'></script>
<!-- End Cloudflare Web Analytics -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WFQQ172YYK"></script>

<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Find the Adjectives</title>

<style>
:root{
  --bg:#f6f7ff; --card:#fff;
  --green:#16a34a; --greenSoft:#ecfdf5;
  --red:#dc2626; --redSoft:#fef2f2;
  --border:#e5e7eb;
  --shadow:0 12px 32px rgba(0,0,0,.1);
}
*{box-sizing:border-box}
body{
  margin:0; padding:22px 16px 48px;
  font-family: system-ui,-apple-system,"Segoe UI","Noto Sans TC","Microsoft JhengHei",sans-serif;
  background:var(--bg); color:#1f2937;
}
.wrap{
  max-width:920px; margin:0 auto;
  background:var(--card);
  border-radius:22px;
  padding:22px 20px;
  box-shadow:var(--shadow);
  position:relative;
}
h1{margin:0 0 8px;font-size:24px;font-weight:900}
.how{font-size:18px;margin-bottom:14px}

/* Progress */
.progressRow{display:flex;gap:12px;align-items:center;margin-bottom:16px}
.progressBar{
  flex:1;height:14px;border-radius:999px;
  background:#eef0ff;overflow:hidden;border:1px solid #e3e5ff
}
.progressFill{
  height:100%;width:0%;
  background:linear-gradient(90deg,rgba(22,163,74,.25),rgba(22,163,74,.85));
  transition:width .25s ease
}
.progressText{font-weight:900;color:#6b7280}

/* Sentence */
.sentence{
  border:2px dashed #d7d9f7;border-radius:20px;
  padding:18px;background:#fbfbff;min-height:130px;
  position:relative
}
.tokens{display:flex;flex-wrap:wrap;gap:12px}

/* Words */
.word{
  border:3px solid var(--border);
  background:#fff;border-radius:999px;
  padding:12px 18px;font-size:22px;
  cursor:pointer;min-height:54px;
  box-shadow:0 8px 20px rgba(31,41,55,.08);
  transition:.1s;user-select:none
}
.word:hover{transform:translateY(-1px)}
.word:active{transform:scale(.97)}
.punct{
  border:none;background:transparent;
  cursor:default;opacity:.5;
  font-size:26px;padding:0 2px
}

/*åœˆé¸ç‹€æ…‹*/
.adj{
  border-color:var(--green);
  background:var(--greenSoft);
  box-shadow:0 0 0 6px rgba(22,163,74,.18)
}
.notAdj{
  border-color:var(--red);
  background:var(--redSoft);
  box-shadow:0 0 0 6px rgba(220,38,38,.14)
}

/* å¤§å‹¾ */
.bigCheck{
  position:absolute;inset:0;
  display:flex;align-items:center;justify-content:center;
  pointer-events:none;opacity:0;transform:scale(.9);
  transition:.18s
}
.bigCheck.show{opacity:1;transform:scale(1)}
.bigCheck .badge{
  width:260px;aspect-ratio:1/1;border-radius:50%;
  background:rgba(22,163,74,.15);
  border:6px solid rgba(22,163,74,.4);
  display:flex;align-items:center;justify-content:center
}
.bigCheck span{font-size:150px;font-weight:900;color:var(--green)}

/* Controls */
.controls{margin-top:16px;display:flex;justify-content:space-between;align-items:center}
.btn{
  height:56px;padding:0 22px;border-radius:18px;
  border:2px solid var(--border);background:#fff;
  font-size:18px;font-weight:900;cursor:pointer
}
.btn:disabled{opacity:.45;cursor:not-allowed}
.meta{font-weight:900;color:#6b7280}

/* Confetti */
#confetti{
  position:fixed;inset:0;
  width:100vw;height:100vh;
  pointer-events:none;z-index:9999;display:none
}

/* Finish overlay */
.finishOverlay{
  position:fixed;inset:0;
  background:rgba(17,24,39,.45);
  display:none;align-items:center;justify-content:center;
  z-index:9998
}
.finishCard{
  background:#fff;border-radius:26px;
  padding:22px 18px;text-align:center;
  box-shadow:0 22px 70px rgba(0,0,0,.25)
}
.finishCheck{
  width:220px;aspect-ratio:1/1;border-radius:50%;
  margin:12px auto;
  background:rgba(22,163,74,.14);
  border:7px solid rgba(22,163,74,.42);
  display:flex;align-items:center;justify-content:center
}
.finishCheck span{font-size:140px;font-weight:900;color:var(--green)}
</style>
</head>

<body>
<canvas id="confetti"></canvas>

<div class="finishOverlay" id="finishOverlay">
  <div class="finishCard">
    <h2>ğŸ‰ å…¨éƒ¨å®Œæˆï¼</h2>
    <div class="finishCheck"><span>âœ“</span></div>
    <button class="btn" onclick="location.reload()">ğŸ”„ å†ç©ä¸€æ¬¡</button>
  </div>
</div>

<div class="wrap">
  <h1>ğŸ” Find the adjectives</h1>
  <div class="how">é»å–®å­—æŠŠ <b>å½¢å®¹è©åœˆèµ·ä¾†</b>ï¼ˆå…¨éƒ¨å°æ‰å¯ä¸‹ä¸€é¡Œï¼‰</div>

  <div class="progressRow">
    <div class="progressBar"><div class="progressFill" id="progressFill"></div></div>
    <div class="progressText"><span id="doneCount">0</span>/<span id="totalCount">0</span></div>
  </div>

  <div class="sentence">
    <div class="tokens" id="tokens"></div>
    <div class="bigCheck" id="bigCheck">
      <div class="badge"><span>âœ“</span></div>
    </div>
  </div>

  <div class="controls">
    <div class="meta">é¡Œç›® <span id="qIndex">1</span>/<span id="qTotal">1</span></div>
    <button class="btn" id="btnNext" disabled>â¡ï¸ ä¸‹ä¸€é¡Œ</button>
  </div>
</div>

<script src="data.js"></script>
<script>
let idx = 0;
const completed = [];

const elTokens = document.getElementById("tokens");
const elBigCheck = document.getElementById("bigCheck");
const btnNext = document.getElementById("btnNext");
const elProgressFill = document.getElementById("progressFill");
const elDoneCount = document.getElementById("doneCount");
const elTotalCount = document.getElementById("totalCount");
const elFinishOverlay = document.getElementById("finishOverlay");
const canvas = document.getElementById("confetti");

function tokenize(s){return s.match(/[A-Za-z]+|[^\sA-Za-z]/g)||[]}
function norm(w){return w.toLowerCase()}

function render(){
  const q = DATA[idx];
  elTokens.innerHTML = "";
  elBigCheck.classList.remove("show");
  btnNext.disabled = true;

  document.getElementById("qIndex").textContent = idx+1;
  document.getElementById("qTotal").textContent = DATA.length;
  elTotalCount.textContent = DATA.length;

  tokenize(q.sentence).forEach(t=>{
    const btn = document.createElement("button");
    if(/^[^\w]+$/.test(t)){
      btn.textContent=t;btn.className="word punct";btn.disabled=true;
    }else{
      btn.textContent=t;btn.className="word";btn.dataset.word=norm(t);
      btn.onclick=()=>{
        const isAdj=q.adjectives.includes(btn.dataset.word);
        btn.classList.toggle(isAdj?"adj":"notAdj");
        if(isAdj) btn.classList.remove("notAdj");
        else btn.classList.remove("adj");
        checkComplete();
      }
    }
    elTokens.appendChild(btn);
  });
}

function checkComplete(){
  const q=DATA[idx];
  const picked=[...elTokens.querySelectorAll(".adj")].map(b=>b.dataset.word);
  const hasWrong=elTokens.querySelectorAll(".notAdj").length>0;
  const allPicked=q.adjectives.every(a=>picked.includes(a));
  const perfect=allPicked && !hasWrong;

  elBigCheck.classList.toggle("show",perfect);
  btnNext.disabled=!perfect;
  completed[idx]=perfect;

  const done=completed.filter(Boolean).length;
  elDoneCount.textContent=done;
  elProgressFill.style.width=Math.round(done/DATA.length*100)+"%";

  if(done===DATA.length){
    elFinishOverlay.style.display="flex";
    startConfetti();
  }
}

btnNext.onclick=()=>{
  if(btnNext.disabled) return;
  idx++; if(idx>=DATA.length) idx=DATA.length-1;
  render();
};

/* ===== Confetti ===== */
let raf=null;
function startConfetti(){
  const ctx=canvas.getContext("2d");
  canvas.style.display="block";
  canvas.width=innerWidth;canvas.height=innerHeight;
  const pieces=Array.from({length:220},()=>({
    x:Math.random()*canvas.width,
    y:-20,
    vx:(Math.random()*4-2),
    vy:(Math.random()*3+2),
    r:Math.random()*360
  }));
  function frame(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    pieces.forEach(p=>{
      p.vy+=0.05;p.x+=p.vx;p.y+=p.vy;
      ctx.fillStyle=`hsl(${p.r},90%,60%)`;
      ctx.fillRect(p.x,p.y,6,6);
    });
    raf=requestAnimationFrame(frame);
  }
  frame();
  setTimeout(()=>{cancelAnimationFrame(raf);canvas.style.display="none"},1800);
}

render();
</script>
</body>
</html>
